# ユーザーインタラクション フロー

この図は、ユーザーから見たSlack Botとの主要なインタラクションを示しています。

## メインユーザーフロー

```mermaid
sequenceDiagram
    participant U as ユーザー
    participant S as Slack
    participant B as Bot

    Note over U,B: 基本的なコマンド実行フロー
    
    rect rgb(240, 248, 255)
        Note over U,B: 1. スラッシュコマンド
        U->>S: /hello 太郎
        S->>B: コマンド受信
        B->>S: こんにちは、太郎！
        S->>U: メッセージ表示
        
        U->>S: /time  
        S->>B: 時刻要求
        B->>S: 現在時刻情報
        S->>U: 時刻表示
        
        U->>S: /status
        S->>B: 状態要求
        B->>S: サーバー状態情報
        S->>U: 状態表示
    end

    rect rgb(245, 255, 245)
        Note over U,B: 2. メンション機能
        U->>S: @bot こんにちは
        S->>B: メンション受信
        B->>S: インタラクティブメッセージ
        S->>U: ボタン付きメッセージ表示
    end

    rect rgb(255, 245, 245)
        Note over U,B: 3. ボタンインタラクション
        U->>S: 「時刻を確認」ボタンクリック
        S->>B: ボタンアクション
        B->>S: 詳細時刻情報
        S->>U: 時刻詳細表示
        
        U->>S: 「ヘルプ」ボタンクリック
        S->>B: ヘルプアクション
        B->>S: ヘルプ情報
        S->>U: コマンド一覧表示
    end
```

## 利用可能な機能一覧

### スラッシュコマンド
| コマンド | 説明 | 使用例 |
|---------|------|--------|
| `/hello` | 挨拶メッセージ | `/hello` または `/hello 太郎` |
| `/time` | 現在時刻表示 | `/time` |
| `/status` | サーバー状態確認 | `/status` |

### メンション機能
- `@bot こんにちは` - インタラクティブな挨拶
- `@bot 時刻` - 簡易時刻表示
- `@bot [その他]` - ヘルプ情報表示

### ボタンアクション
- **時刻を確認** - 詳細な時刻情報を表示
- **ヘルプ** - 利用可能なコマンドと機能の説明

## 技術仕様

### 通信方式
- **WebSocket (Socket Mode)**: リアルタイム双方向通信
- **HTTPSエンドポイント不要**: ngrokやReverse Proxy不要
- **自動再接続**: 接続断絶時の自動復旧

### レスポンス形式
- **Block Kit**: Slackのリッチフォーマット使用
- **インタラクティブ要素**: ボタン、セクション等
- **マークダウン対応**: 絵文字、強調表示等

この設計により、ユーザーは直感的かつ効率的にBotと対話できます。